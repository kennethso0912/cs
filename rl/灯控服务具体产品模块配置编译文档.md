# 灯控服务子模块配置说明文档

## 前言


  灯控服务支持多种机器人产品编译打包，不同的机器人产品可选择不同的具体相关产品子模块来构建灯控服务，
目前已在alpha上封装了alpha机器人子模块(alpha),实现逻辑参考ROSE-灯控服务&API设计文档。
本文是描述如何在代码中配置具体硬件产品的灯控服务实现子模块，构建不同的灯控服务。

## 以alpha灯控服务为例

### 一、配置步骤
* 首先在app/products目录下配置具体产品的配置文件，如例子产品alpha配置config.properties文件  
  ![](https://raw.githubusercontent.com/kennethso0912/source/master/source/product.png)  
  并在文件中配置具体对应的产品名称和该产品灯控的具体实现类全路径  
  ![](https://raw.githubusercontent.com/kennethso0912/source/master/source/product_file_content.png)


* 在app 的build.gradle中配置alpha的productFlavors

    ```groovy
            productFlavors {
                //alpha， 详细配置参考app模块内build.gradle
                alpha {
                    def props = getProductProps('ifytek')
                    if (props != null){
                        applicationId props['applicationId']
                        buildConfigField "String", "SpeechEngine", props['className']
                        printf('applicationId=%s,className=%s\n',props['applicationId'], props['className'])
                    }
                }
                //...
        }
    ```

* 在app 的build.gradle中设置对应的dependencies

    ```groovy
    dependencies {
        //...
        //指定依赖具体产品实现模块
        alphaCompile project(':alpha'')
        //...
    }
    ```

### 二、编译说明

* 命令行编译

```shell
    // --构建alpha平台下的灯控服务
   ./gradlew assembleAlphaRelease
```

* 调试运行

设置如下Variants:

![](https://raw.githubusercontent.com/kennethso0912/source/master/source/build_vaiant.png)